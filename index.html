<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>春节倒计时</title>
    <link href="css/fullpage.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
</head>
<body>
    <!-- 背景音乐 -->
    <audio class="audio-player" id="audio" autobuffer="autobuffer" autoplay="autoplay" loop="loop">
        <source src="audio/song.mp3" type="audio/mp3" />
    </audio>
    <!-- 背景容器 -->
    <div class="bg-container snowy">
        <div class="overlay"></div>
        <!-- 页面内容 -->
        <span>当前时间</span>
        <span id="date" class="date">DATE</span>
        <span id="time" class="time">TIME</span>
        <div class="page-content">
            <div class="fullpage">
                <!-- 主页部分 -->
                <div id="home" class="section active">
                    <!-- 标题 -->
                    <h2 id="countdown-title"></h2></br>
                    <!-- 倒计时本体 -->
                    <div class="snow-box">
                        <div class="countdown" id="countdown" data-date=""></div>
                    </div></br></br>
                    <h3>部分代码由<a style="color:#00FFFF" target="_blank" href="https://www.hancat.work/">小憨憨</a>提供。</h3>
                    <div class="box"><br>
                        <p id="subtitle">歌词载入ing</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', async (event) => {
            const currentDate = new Date();
            const formattedDate = `${currentDate.getFullYear()}/${String(currentDate.getMonth() + 1).padStart(2, '0')}/${String(currentDate.getDate()).padStart(2, '0')}`;
            const response = await fetch(`/next-lunar-new-year?date=${formattedDate}`);
            const data = await response.json();
            const nextLunarNewYear = data.nextLunarNewYear;
            const nextLunarNewYearYear = new Date(nextLunarNewYear).getFullYear();

            document.getElementById('countdown').setAttribute('data-date', nextLunarNewYear);
            document.getElementById('countdown-title').innerText = `${nextLunarNewYearYear} 春节倒计时`;
        });
    </script>
</body>
</html>